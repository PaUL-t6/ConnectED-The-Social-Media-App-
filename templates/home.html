<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ConnectEd</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='css/home.css') }}">
</head>

<body>
    <div class="title-bar">
        <div class="left">
            <img src="{{ url_for('static', filename='images/symbol.webp') }}" alt="Symbol" class="symbol">
            <span class="title">ConnectEd</span>
        </div>
        <div class="right">
            <span class="username">Hello, {{ username }}</span>
            <button class="profile-btn" onclick="window.location.href='/profile/{{ username }}'">
                <div class="profile-circle"><img src="{{ url_for('static', filename='images/profile.jpeg') }}"
                        alt="Symbol" class="symbol"></div>
            </button>
        </div>
    </div>

    <div class="status-bar">
        {% for club in clubs %}
        <div class="status">
            <div class="status-circle" onclick="showPopup('{{ club.announcements }}')">
                {{ club.club_id }}
            </div>
            <span class="status-name">Club {{ club.club_id }}</span>
        </div>
        {% endfor %}
    </div>

    <!-- Popup and overlay -->
    <div class="overlay" id="overlay" onclick="hidePopup()"></div>
    <div class="popup" id="popup">
        <p id="popup-content"></p>
        <button onclick="hidePopup()">Close</button>
    </div>

    <div class="scrollable-sections">
        <div class="section">
            <h2>Requests</h2>
            <ul class="scrollable-list">
                {% for req in requests %}
                <li>
                    <strong>{{ req.applicant_username }}</strong> wants to join
                    <strong>{{ req.team_name }}</strong> for
                    <strong>{{ req.hackathon_name }}</strong>
                    <a href="{{ url_for('home', username=username, applicant_username=req.applicant_username, team_id=req.team_id) }}"
                        class="btn accept-btn">Accept</a>
                </li>
                {% endfor %}
            </ul>
        </div>
        <div class="section">
            <h2>Hackathons</h2>
            <div class="hackathon-container">
                {% for hackathon in hackathons %}
                <div class="hackathon-card">
                    <a href="{{ url_for('hackathon_details', username=username, hackathon_name=hackathon) }}"
                        class="hackathon-link">
                        {{ hackathon }}
                    </a>
                </div>
                {% endfor %}
            </div>
        </div>

        <div class="section">
            <h2>Projects</h2>
            <div class="project-container">
                {% for project in projects %}
                <div class="project-card">
                    <a href="{{ url_for('project_details', username=username, project_name=project) }}"
                        class="project-link">
                        {{ project }}
                    </a>
                </div>
                {% endfor %}
            </div>
            <button class="btn create-btn" onclick="window.location.href='/home/{{ username }}/createproject'">Create
                Project</button>
        </div>
    </div>

    <script>
        function showPopup(content) {
            console.log("Popup content:", content); // Debugging line
            document.getElementById('popup-content').innerText = content;
            document.getElementById('popup').style.display = 'block';
            document.getElementById('overlay').style.display = 'block';
        }

        function hidePopup() {
            console.log("Hiding popup"); // Debugging line
            document.getElementById('popup').style.display = 'none';
            document.getElementById('overlay').style.display = 'none';
        }
    </script>
</body>

</html>